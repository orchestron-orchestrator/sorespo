import file
import process

import orchestron.build
import orchestron.yang as oyang
from transform_list_order import remove_list_user_order
from transform_filter_schema import filter_schema

actor main(env):
    fc = file.FileCap(env.cap)
    pc = process.ProcessCap(env.cap)

    orchestron.build.apply_schema_transforms_to_dir(fc, "yang/CiscoIosXr_24_1_ncs55a1", [
        orchestron.build.SchemaTransformChain(".*yang.orig", [orchestron.build.SchemaTransformNoComments()])
    ])
    orchestron.build.apply_schema_transforms_to_dir(fc, "yang/NokiaSRLinux_25_3_2", [
        orchestron.build.SchemaTransformChain(".*yang.orig", [orchestron.build.SchemaTransformNoComments()])
    ])

    cfs_layer = orchestron.build.Layer.from_dir(fc, "yang/cfs")
    cfs_layer.models.append(oyang.ietf_inet_types)
    inter_layer = orchestron.build.Layer.from_dir(fc, "yang/inter")
    inter_layer.models.append(oyang.ietf_inet_types)
    rfs_layer = orchestron.build.Layer.from_dir(fc, "yang/rfs")
    rfs_layer.models.extend([oyang.rfs, oyang.ietf_inet_types])

    def transform_list_order(dt):
        paths = [
            "/jc:configuration/protocols/bgp/group/neighbor",
            "/jc:configuration/protocols/mpls/interface",
        ]
        remove_list_user_order(dt.root, paths)
        return dt

    def transform_filter(dt):
        # TODO: this list of paths was automatically generated by comparing the
        # old YANG modules (augmenting junos-conf-rooot) with the new one
        # (single junos-conf-root module) and then outputting a pruned list of
        # paths that were present in the new model. Note how the list includes
        # paths we don't use in our RFS transforms at all, like the groups. We
        # could just remove these from the filter to reduce the size of the
        # generated adata module.
        paths = [
    "/jc:configuration/groups/interfaces/interface/description",
    "/jc:configuration/groups/interfaces/interface/mac",
    "/jc:configuration/groups/interfaces/interface/mtu",
    "/jc:configuration/groups/interfaces/interface/name",
    "/jc:configuration/groups/interfaces/interface/native-vlan-id",
    "/jc:configuration/groups/interfaces/interface/unit/alias",
    "/jc:configuration/groups/interfaces/interface/unit/description",
    "/jc:configuration/groups/interfaces/interface/unit/encapsulation",
    "/jc:configuration/groups/interfaces/interface/unit/family/inet",
    "/jc:configuration/groups/interfaces/interface/unit/family/inet/address/name",
    "/jc:configuration/groups/interfaces/interface/unit/family/inet6",
    "/jc:configuration/groups/interfaces/interface/unit/family/inet6/address/name",
    "/jc:configuration/groups/interfaces/interface/unit/family/iso",
    "/jc:configuration/groups/interfaces/interface/unit/family/iso/address/name",
    "/jc:configuration/groups/interfaces/interface/unit/mac",
    "/jc:configuration/groups/interfaces/interface/unit/mtu",
    "/jc:configuration/groups/interfaces/interface/unit/name",
    "/jc:configuration/groups/interfaces/interface/unit/vlan-id",
    "/jc:configuration/groups/name",
    "/jc:configuration/groups/rcsid",
    "/jc:configuration/groups/routing-instances/instance/apply-groups",
    "/jc:configuration/groups/routing-instances/instance/apply-groups-except",
    "/jc:configuration/groups/routing-instances/instance/export-default-action",
    "/jc:configuration/groups/routing-instances/instance/import-default-action",
    "/jc:configuration/groups/routing-instances/instance/instance-type",
    "/jc:configuration/groups/routing-instances/instance/interface/any",
    "/jc:configuration/groups/routing-instances/instance/interface/multicast",
    "/jc:configuration/groups/routing-instances/instance/interface/name",
    "/jc:configuration/groups/routing-instances/instance/interface/primary",
    "/jc:configuration/groups/routing-instances/instance/interface/unicast",
    "/jc:configuration/groups/routing-instances/instance/name",
    "/jc:configuration/groups/routing-instances/instance/no-vrf-advertise",
    "/jc:configuration/groups/routing-instances/instance/protocols/bgp/group/export",
    "/jc:configuration/groups/routing-instances/instance/protocols/bgp/group/import",
    "/jc:configuration/groups/routing-instances/instance/protocols/bgp/group/name",
    "/jc:configuration/groups/routing-instances/instance/protocols/bgp/group/neighbor/as-override",
    "/jc:configuration/groups/routing-instances/instance/protocols/bgp/group/neighbor/authentication-algorithm",
    "/jc:configuration/groups/routing-instances/instance/protocols/bgp/group/neighbor/authentication-key",
    "/jc:configuration/groups/routing-instances/instance/protocols/bgp/group/neighbor/description",
    "/jc:configuration/groups/routing-instances/instance/protocols/bgp/group/neighbor/multihop",
    "/jc:configuration/groups/routing-instances/instance/protocols/bgp/group/neighbor/multihop/no-nexthop-change",
    "/jc:configuration/groups/routing-instances/instance/protocols/bgp/group/neighbor/multihop/ttl",
    "/jc:configuration/groups/routing-instances/instance/protocols/bgp/group/neighbor/name",
    "/jc:configuration/groups/routing-instances/instance/protocols/bgp/group/neighbor/peer-as",
    "/jc:configuration/groups/routing-instances/instance/protocols/bgp/group/passive",
    "/jc:configuration/groups/routing-instances/instance/protocols/evpn",
    "/jc:configuration/groups/routing-instances/instance/protocols/evpn/control-word",
    "/jc:configuration/groups/routing-instances/instance/route-distinguisher",
    "/jc:configuration/groups/routing-instances/instance/vrf-table-label",
    "/jc:configuration/groups/routing-instances/instance/vrf-target/auto",
    "/jc:configuration/groups/routing-instances/instance/vrf-target/community",
    "/jc:configuration/groups/routing-instances/instance/vrf-target/export",
    "/jc:configuration/groups/routing-instances/instance/vrf-target/import",
    "/jc:configuration/groups/system/host-name",
    "/jc:configuration/groups/system/services",
    "/jc:configuration/groups/system/services/netconf/rfc-compliant",
    "/jc:configuration/groups/system/services/netconf/yang-compliant",
    "/jc:configuration/groups/version",
    "/jc:configuration/groups/when/chassis",
    "/jc:configuration/groups/when/member",
    "/jc:configuration/groups/when/model",
    "/jc:configuration/groups/when/node",
    "/jc:configuration/groups/when/routing-engine",
    "/jc:configuration/groups/when/time/start-time",
    "/jc:configuration/groups/when/time/to/end-time",
    "/jc:configuration/interfaces/interface/description",
    "/jc:configuration/interfaces/interface/mac",
    "/jc:configuration/interfaces/interface/mtu",
    "/jc:configuration/interfaces/interface/name",
    "/jc:configuration/interfaces/interface/native-vlan-id",
    "/jc:configuration/interfaces/interface/unit/alias",
    "/jc:configuration/interfaces/interface/unit/description",
    "/jc:configuration/interfaces/interface/unit/encapsulation",
    "/jc:configuration/interfaces/interface/unit/family/inet",
    "/jc:configuration/interfaces/interface/unit/family/inet/address/name",
    "/jc:configuration/interfaces/interface/unit/family/inet6",
    "/jc:configuration/interfaces/interface/unit/family/inet6/address/name",
    "/jc:configuration/interfaces/interface/unit/family/iso",
    "/jc:configuration/interfaces/interface/unit/family/iso/address/name",
    "/jc:configuration/interfaces/interface/unit/mac",
    "/jc:configuration/interfaces/interface/unit/mtu",
    "/jc:configuration/interfaces/interface/unit/name",
    "/jc:configuration/interfaces/interface/unit/vlan-id",
    "/jc:configuration/protocols/bgp/group/authentication-algorithm",
    "/jc:configuration/protocols/bgp/group/authentication-key",
    "/jc:configuration/protocols/bgp/group/authentication-key-chain",
    "/jc:configuration/protocols/bgp/group/description",
    "/jc:configuration/protocols/bgp/group/export",
    "/jc:configuration/protocols/bgp/group/family/evpn/signaling",
    "/jc:configuration/protocols/bgp/group/family/inet-vpn/unicast",
    "/jc:configuration/protocols/bgp/group/family/inet-vpn/unicast/accept-local-nexthop",
    "/jc:configuration/protocols/bgp/group/family/inet-vpn/unicast/accept-own",
    "/jc:configuration/protocols/bgp/group/family/inet-vpn/unicast/accept-srv6-service",
    "/jc:configuration/protocols/bgp/group/family/inet-vpn/unicast/accepted-prefix-limit/drop-excess",
    "/jc:configuration/protocols/bgp/group/family/inet-vpn/unicast/accepted-prefix-limit/drop-excess/limit-threshold",
    "/jc:configuration/protocols/bgp/group/family/inet-vpn/unicast/accepted-prefix-limit/hide-excess",
    "/jc:configuration/protocols/bgp/group/family/inet-vpn/unicast/accepted-prefix-limit/hide-excess/limit-threshold",
    "/jc:configuration/protocols/bgp/group/family/inet-vpn/unicast/accepted-prefix-limit/maximum",
    "/jc:configuration/protocols/bgp/group/family/inet-vpn/unicast/accepted-prefix-limit/teardown",
    "/jc:configuration/protocols/bgp/group/family/inet-vpn/unicast/accepted-prefix-limit/teardown/idle-timeout",
    "/jc:configuration/protocols/bgp/group/family/inet-vpn/unicast/accepted-prefix-limit/teardown/limit-threshold",
    "/jc:configuration/protocols/bgp/group/family/inet-vpn/unicast/add-path/receive",
    "/jc:configuration/protocols/bgp/group/family/inet-vpn/unicast/add-path/send",
    "/jc:configuration/protocols/bgp/group/family/inet-vpn/unicast/add-path/send/include-backup-path",
    "/jc:configuration/protocols/bgp/group/family/inet-vpn/unicast/add-path/send/multipath",
    "/jc:configuration/protocols/bgp/group/family/inet-vpn/unicast/add-path/send/path-count",
    "/jc:configuration/protocols/bgp/group/family/inet-vpn/unicast/add-path/send/path-selection-mode/all-paths",
    "/jc:configuration/protocols/bgp/group/family/inet-vpn/unicast/add-path/send/path-selection-mode/equal-cost-paths",
    "/jc:configuration/protocols/bgp/group/family/inet-vpn/unicast/add-path/send/prefix-policy",
    "/jc:configuration/protocols/bgp/group/family/inet-vpn/unicast/advertise-srv6-service",
    "/jc:configuration/protocols/bgp/group/family/inet-vpn/unicast/aggregate-label",
    "/jc:configuration/protocols/bgp/group/family/inet-vpn/unicast/aggregate-label/community",
    "/jc:configuration/protocols/bgp/group/family/inet-vpn/unicast/aigp",
    "/jc:configuration/protocols/bgp/group/family/inet-vpn/unicast/aigp/disable",
    "/jc:configuration/protocols/bgp/group/family/inet-vpn/unicast/damping",
    "/jc:configuration/protocols/bgp/group/family/inet-vpn/unicast/defer-initial-multipath-build",
    "/jc:configuration/protocols/bgp/group/family/inet-vpn/unicast/defer-initial-multipath-build/maximum-delay",
    "/jc:configuration/protocols/bgp/group/family/inet-vpn/unicast/delay-route-advertisements",
    "/jc:configuration/protocols/bgp/group/family/inet-vpn/unicast/delay-route-advertisements/always-wait-for-krt-drain",
    "/jc:configuration/protocols/bgp/group/family/inet-vpn/unicast/delay-route-advertisements/maximum-delay/route-age",
    "/jc:configuration/protocols/bgp/group/family/inet-vpn/unicast/delay-route-advertisements/maximum-delay/routing-uptime",
    "/jc:configuration/protocols/bgp/group/family/inet-vpn/unicast/delay-route-advertisements/minimum-delay/inbound-convergence",
    "/jc:configuration/protocols/bgp/group/family/inet-vpn/unicast/delay-route-advertisements/minimum-delay/routing-uptime",
    "/jc:configuration/protocols/bgp/group/family/inet-vpn/unicast/egress-protection",
    "/jc:configuration/protocols/bgp/group/family/inet-vpn/unicast/egress-protection/context-identifier/context-id",
    "/jc:configuration/protocols/bgp/group/family/inet-vpn/unicast/egress-protection/keep-import",
    "/jc:configuration/protocols/bgp/group/family/inet-vpn/unicast/extended-nexthop",
    "/jc:configuration/protocols/bgp/group/family/inet-vpn/unicast/extended-nexthop-color",
    "/jc:configuration/protocols/bgp/group/family/inet-vpn/unicast/extended-nexthop-tunnel",
    "/jc:configuration/protocols/bgp/group/family/inet-vpn/unicast/graceful-restart/forwarding-state-bit",
    "/jc:configuration/protocols/bgp/group/family/inet-vpn/unicast/graceful-restart/long-lived/extended-route-retention/disable",
    "/jc:configuration/protocols/bgp/group/family/inet-vpn/unicast/graceful-restart/long-lived/extended-route-retention/retention-policy",
    "/jc:configuration/protocols/bgp/group/family/inet-vpn/unicast/graceful-restart/long-lived/extended-route-retention/retention-time",
    "/jc:configuration/protocols/bgp/group/family/inet-vpn/unicast/graceful-restart/long-lived/restarter/disable",
    "/jc:configuration/protocols/bgp/group/family/inet-vpn/unicast/graceful-restart/long-lived/restarter/stale-time",
    "/jc:configuration/protocols/bgp/group/family/inet-vpn/unicast/local-ipv4-address",
    "/jc:configuration/protocols/bgp/group/family/inet-vpn/unicast/loops/loops",
    "/jc:configuration/protocols/bgp/group/family/inet-vpn/unicast/nexthop-resolution/no-resolution",
    "/jc:configuration/protocols/bgp/group/family/inet-vpn/unicast/nexthop-resolution/preserve-nexthop-hierarchy",
    "/jc:configuration/protocols/bgp/group/family/inet-vpn/unicast/no-install",
    "/jc:configuration/protocols/bgp/group/family/inet-vpn/unicast/output-queue-priority",
    "/jc:configuration/protocols/bgp/group/family/inet-vpn/unicast/prefix-limit/drop-excess",
    "/jc:configuration/protocols/bgp/group/family/inet-vpn/unicast/prefix-limit/drop-excess/limit-threshold",
    "/jc:configuration/protocols/bgp/group/family/inet-vpn/unicast/prefix-limit/hide-excess",
    "/jc:configuration/protocols/bgp/group/family/inet-vpn/unicast/prefix-limit/hide-excess/limit-threshold",
    "/jc:configuration/protocols/bgp/group/family/inet-vpn/unicast/prefix-limit/maximum",
    "/jc:configuration/protocols/bgp/group/family/inet-vpn/unicast/prefix-limit/teardown",
    "/jc:configuration/protocols/bgp/group/family/inet-vpn/unicast/prefix-limit/teardown/idle-timeout",
    "/jc:configuration/protocols/bgp/group/family/inet-vpn/unicast/prefix-limit/teardown/limit-threshold",
    "/jc:configuration/protocols/bgp/group/family/inet-vpn/unicast/rib-group",
    "/jc:configuration/protocols/bgp/group/family/inet-vpn/unicast/route-age-bgp-view",
    "/jc:configuration/protocols/bgp/group/family/inet-vpn/unicast/route-refresh-priority",
    "/jc:configuration/protocols/bgp/group/family/inet-vpn/unicast/withdraw-priority",
    "/jc:configuration/protocols/bgp/group/family/inet6-vpn/unicast",
    "/jc:configuration/protocols/bgp/group/family/inet6-vpn/unicast/accept-local-nexthop",
    "/jc:configuration/protocols/bgp/group/family/inet6-vpn/unicast/accept-own",
    "/jc:configuration/protocols/bgp/group/family/inet6-vpn/unicast/accept-srv6-service",
    "/jc:configuration/protocols/bgp/group/family/inet6-vpn/unicast/accepted-prefix-limit/drop-excess",
    "/jc:configuration/protocols/bgp/group/family/inet6-vpn/unicast/accepted-prefix-limit/drop-excess/limit-threshold",
    "/jc:configuration/protocols/bgp/group/family/inet6-vpn/unicast/accepted-prefix-limit/hide-excess",
    "/jc:configuration/protocols/bgp/group/family/inet6-vpn/unicast/accepted-prefix-limit/hide-excess/limit-threshold",
    "/jc:configuration/protocols/bgp/group/family/inet6-vpn/unicast/accepted-prefix-limit/maximum",
    "/jc:configuration/protocols/bgp/group/family/inet6-vpn/unicast/accepted-prefix-limit/teardown",
    "/jc:configuration/protocols/bgp/group/family/inet6-vpn/unicast/accepted-prefix-limit/teardown/idle-timeout",
    "/jc:configuration/protocols/bgp/group/family/inet6-vpn/unicast/accepted-prefix-limit/teardown/limit-threshold",
    "/jc:configuration/protocols/bgp/group/family/inet6-vpn/unicast/add-path/receive",
    "/jc:configuration/protocols/bgp/group/family/inet6-vpn/unicast/add-path/send",
    "/jc:configuration/protocols/bgp/group/family/inet6-vpn/unicast/add-path/send/include-backup-path",
    "/jc:configuration/protocols/bgp/group/family/inet6-vpn/unicast/add-path/send/multipath",
    "/jc:configuration/protocols/bgp/group/family/inet6-vpn/unicast/add-path/send/path-count",
    "/jc:configuration/protocols/bgp/group/family/inet6-vpn/unicast/add-path/send/path-selection-mode/all-paths",
    "/jc:configuration/protocols/bgp/group/family/inet6-vpn/unicast/add-path/send/path-selection-mode/equal-cost-paths",
    "/jc:configuration/protocols/bgp/group/family/inet6-vpn/unicast/add-path/send/prefix-policy",
    "/jc:configuration/protocols/bgp/group/family/inet6-vpn/unicast/advertise-srv6-service",
    "/jc:configuration/protocols/bgp/group/family/inet6-vpn/unicast/aggregate-label",
    "/jc:configuration/protocols/bgp/group/family/inet6-vpn/unicast/aggregate-label/community",
    "/jc:configuration/protocols/bgp/group/family/inet6-vpn/unicast/aigp",
    "/jc:configuration/protocols/bgp/group/family/inet6-vpn/unicast/aigp/disable",
    "/jc:configuration/protocols/bgp/group/family/inet6-vpn/unicast/damping",
    "/jc:configuration/protocols/bgp/group/family/inet6-vpn/unicast/defer-initial-multipath-build",
    "/jc:configuration/protocols/bgp/group/family/inet6-vpn/unicast/defer-initial-multipath-build/maximum-delay",
    "/jc:configuration/protocols/bgp/group/family/inet6-vpn/unicast/delay-route-advertisements",
    "/jc:configuration/protocols/bgp/group/family/inet6-vpn/unicast/delay-route-advertisements/always-wait-for-krt-drain",
    "/jc:configuration/protocols/bgp/group/family/inet6-vpn/unicast/delay-route-advertisements/maximum-delay/route-age",
    "/jc:configuration/protocols/bgp/group/family/inet6-vpn/unicast/delay-route-advertisements/maximum-delay/routing-uptime",
    "/jc:configuration/protocols/bgp/group/family/inet6-vpn/unicast/delay-route-advertisements/minimum-delay/inbound-convergence",
    "/jc:configuration/protocols/bgp/group/family/inet6-vpn/unicast/delay-route-advertisements/minimum-delay/routing-uptime",
    "/jc:configuration/protocols/bgp/group/family/inet6-vpn/unicast/egress-protection",
    "/jc:configuration/protocols/bgp/group/family/inet6-vpn/unicast/egress-protection/context-identifier/context-id",
    "/jc:configuration/protocols/bgp/group/family/inet6-vpn/unicast/egress-protection/keep-import",
    "/jc:configuration/protocols/bgp/group/family/inet6-vpn/unicast/extended-nexthop",
    "/jc:configuration/protocols/bgp/group/family/inet6-vpn/unicast/extended-nexthop-color",
    "/jc:configuration/protocols/bgp/group/family/inet6-vpn/unicast/extended-nexthop-tunnel",
    "/jc:configuration/protocols/bgp/group/family/inet6-vpn/unicast/graceful-restart/forwarding-state-bit",
    "/jc:configuration/protocols/bgp/group/family/inet6-vpn/unicast/graceful-restart/long-lived/extended-route-retention/disable",
    "/jc:configuration/protocols/bgp/group/family/inet6-vpn/unicast/graceful-restart/long-lived/extended-route-retention/retention-policy",
    "/jc:configuration/protocols/bgp/group/family/inet6-vpn/unicast/graceful-restart/long-lived/extended-route-retention/retention-time",
    "/jc:configuration/protocols/bgp/group/family/inet6-vpn/unicast/graceful-restart/long-lived/restarter/disable",
    "/jc:configuration/protocols/bgp/group/family/inet6-vpn/unicast/graceful-restart/long-lived/restarter/stale-time",
    "/jc:configuration/protocols/bgp/group/family/inet6-vpn/unicast/local-ipv4-address",
    "/jc:configuration/protocols/bgp/group/family/inet6-vpn/unicast/loops/loops",
    "/jc:configuration/protocols/bgp/group/family/inet6-vpn/unicast/nexthop-resolution/no-resolution",
    "/jc:configuration/protocols/bgp/group/family/inet6-vpn/unicast/nexthop-resolution/preserve-nexthop-hierarchy",
    "/jc:configuration/protocols/bgp/group/family/inet6-vpn/unicast/no-install",
    "/jc:configuration/protocols/bgp/group/family/inet6-vpn/unicast/output-queue-priority",
    "/jc:configuration/protocols/bgp/group/family/inet6-vpn/unicast/prefix-limit/drop-excess",
    "/jc:configuration/protocols/bgp/group/family/inet6-vpn/unicast/prefix-limit/drop-excess/limit-threshold",
    "/jc:configuration/protocols/bgp/group/family/inet6-vpn/unicast/prefix-limit/hide-excess",
    "/jc:configuration/protocols/bgp/group/family/inet6-vpn/unicast/prefix-limit/hide-excess/limit-threshold",
    "/jc:configuration/protocols/bgp/group/family/inet6-vpn/unicast/prefix-limit/maximum",
    "/jc:configuration/protocols/bgp/group/family/inet6-vpn/unicast/prefix-limit/teardown",
    "/jc:configuration/protocols/bgp/group/family/inet6-vpn/unicast/prefix-limit/teardown/idle-timeout",
    "/jc:configuration/protocols/bgp/group/family/inet6-vpn/unicast/prefix-limit/teardown/limit-threshold",
    "/jc:configuration/protocols/bgp/group/family/inet6-vpn/unicast/rib-group",
    "/jc:configuration/protocols/bgp/group/family/inet6-vpn/unicast/route-age-bgp-view",
    "/jc:configuration/protocols/bgp/group/family/inet6-vpn/unicast/route-refresh-priority",
    "/jc:configuration/protocols/bgp/group/family/inet6-vpn/unicast/withdraw-priority",
    "/jc:configuration/protocols/bgp/group/family/route-target",
    "/jc:configuration/protocols/bgp/group/hold-time",
    "/jc:configuration/protocols/bgp/group/local-address",
    "/jc:configuration/protocols/bgp/group/name",
    "/jc:configuration/protocols/bgp/group/neighbor/description",
    "/jc:configuration/protocols/bgp/group/neighbor/name",
    "/jc:configuration/protocols/bgp/group/neighbor/passive",
    "/jc:configuration/protocols/bgp/group/tcp-mss",
    "/jc:configuration/protocols/bgp/group/tcpao-auth-mismatch",
    "/jc:configuration/protocols/bgp/group/type",
    "/jc:configuration/protocols/bgp/log-updown",
    "/jc:configuration/protocols/bgp/path-selection/always-compare-med",
    "/jc:configuration/protocols/bgp/path-selection/as-path-ignore",
    "/jc:configuration/protocols/bgp/path-selection/cisco-non-deterministic",
    "/jc:configuration/protocols/bgp/path-selection/external-router-id",
    "/jc:configuration/protocols/bgp/path-selection/l2vpn-use-bgp-rules",
    "/jc:configuration/protocols/bgp/path-selection/med-plus-igp",
    "/jc:configuration/protocols/bgp/path-selection/med-plus-igp/igp-multiplier",
    "/jc:configuration/protocols/bgp/path-selection/med-plus-igp/med-multiplier",
    "/jc:configuration/protocols/isis/interface/family/bfd-liveness-detection/authentication/algorithm",
    "/jc:configuration/protocols/isis/interface/family/bfd-liveness-detection/authentication/key-chain",
    "/jc:configuration/protocols/isis/interface/family/bfd-liveness-detection/authentication/loose-check",
    "/jc:configuration/protocols/isis/interface/family/bfd-liveness-detection/detection-time/threshold",
    "/jc:configuration/protocols/isis/interface/family/bfd-liveness-detection/echo-lite/minimum-interval",
    "/jc:configuration/protocols/isis/interface/family/bfd-liveness-detection/echo/minimum-interval",
    "/jc:configuration/protocols/isis/interface/family/bfd-liveness-detection/holddown-interval",
    "/jc:configuration/protocols/isis/interface/family/bfd-liveness-detection/inline-disable",
    "/jc:configuration/protocols/isis/interface/family/bfd-liveness-detection/minimum-interval",
    "/jc:configuration/protocols/isis/interface/family/bfd-liveness-detection/minimum-receive-interval",
    "/jc:configuration/protocols/isis/interface/family/bfd-liveness-detection/minimum-transmit-interval",
    "/jc:configuration/protocols/isis/interface/family/bfd-liveness-detection/multiplier",
    "/jc:configuration/protocols/isis/interface/family/bfd-liveness-detection/no-adaptation",
    "/jc:configuration/protocols/isis/interface/family/bfd-liveness-detection/pdu-size",
    "/jc:configuration/protocols/isis/interface/family/bfd-liveness-detection/transmit-interval/minimum-interval",
    "/jc:configuration/protocols/isis/interface/family/bfd-liveness-detection/transmit-interval/threshold",
    "/jc:configuration/protocols/isis/interface/family/bfd-liveness-detection/version",
    "/jc:configuration/protocols/isis/interface/family/name",
    "/jc:configuration/protocols/isis/interface/ldp-synchronization",
    "/jc:configuration/protocols/isis/interface/ldp-synchronization/disable",
    "/jc:configuration/protocols/isis/interface/ldp-synchronization/hold-time",
    "/jc:configuration/protocols/isis/interface/level/disable",
    "/jc:configuration/protocols/isis/interface/level/metric",
    "/jc:configuration/protocols/isis/interface/level/name",
    "/jc:configuration/protocols/isis/interface/lsp-interval",
    "/jc:configuration/protocols/isis/interface/name",
    "/jc:configuration/protocols/isis/interface/passive",
    "/jc:configuration/protocols/isis/interface/passive/remote-node-id",
    "/jc:configuration/protocols/isis/interface/passive/remote-node-iso",
    "/jc:configuration/protocols/isis/interface/point-to-point",
    "/jc:configuration/protocols/isis/level/authentication-key",
    "/jc:configuration/protocols/isis/level/authentication-type",
    "/jc:configuration/protocols/isis/level/disable",
    "/jc:configuration/protocols/isis/level/name",
    "/jc:configuration/protocols/isis/level/no-csnp-authentication",
    "/jc:configuration/protocols/isis/level/no-hello-authentication",
    "/jc:configuration/protocols/isis/level/no-psnp-authentication",
    "/jc:configuration/protocols/isis/level/wide-metrics-only",
    "/jc:configuration/protocols/isis/lsp-lifetime",
    "/jc:configuration/protocols/isis/source-packet-routing",
    "/jc:configuration/protocols/isis/source-packet-routing/adjacency-segment/hold-time",
    "/jc:configuration/protocols/isis/source-packet-routing/explicit-null",
    "/jc:configuration/protocols/isis/source-packet-routing/flex-algorithm",
    "/jc:configuration/protocols/isis/source-packet-routing/ldp-stitching",
    "/jc:configuration/protocols/isis/source-packet-routing/mapping-server",
    "/jc:configuration/protocols/isis/source-packet-routing/new-capability-subtlv",
    "/jc:configuration/protocols/isis/source-packet-routing/no-binding-sid-leaking",
    "/jc:configuration/protocols/isis/source-packet-routing/no-strict-spf",
    "/jc:configuration/protocols/isis/source-packet-routing/node-segment/index-range",
    "/jc:configuration/protocols/isis/source-packet-routing/node-segment/ipv4-index",
    "/jc:configuration/protocols/isis/source-packet-routing/node-segment/ipv6-index",
    "/jc:configuration/protocols/isis/source-packet-routing/srgb",
    "/jc:configuration/protocols/isis/source-packet-routing/srv6",
    "/jc:configuration/protocols/isis/source-packet-routing/srv6/locator/anycast",
    "/jc:configuration/protocols/isis/source-packet-routing/srv6/locator/dynamic-end-sid",
    "/jc:configuration/protocols/isis/source-packet-routing/srv6/locator/dynamic-end-sid/flavor",
    "/jc:configuration/protocols/isis/source-packet-routing/srv6/locator/dynamic-end-sid/flavor/psp",
    "/jc:configuration/protocols/isis/source-packet-routing/srv6/locator/dynamic-end-sid/flavor/usd",
    "/jc:configuration/protocols/isis/source-packet-routing/srv6/locator/dynamic-end-sid/flavor/usp",
    "/jc:configuration/protocols/isis/source-packet-routing/srv6/locator/end-sid/name",
    "/jc:configuration/protocols/isis/source-packet-routing/srv6/locator/micro-node-sid",
    "/jc:configuration/protocols/isis/source-packet-routing/srv6/locator/name",
    "/jc:configuration/protocols/isis/source-packet-routing/strict-asla-based-flex-algorithm",
    "/jc:configuration/protocols/isis/source-packet-routing/udp-tunneling/decapsulation",
    "/jc:configuration/protocols/isis/source-packet-routing/udp-tunneling/encapsulation",
    "/jc:configuration/protocols/isis/source-packet-routing/use-flex-algorithm-metric-always",
    "/jc:configuration/protocols/ldp/interface/disable",
    "/jc:configuration/protocols/ldp/interface/hello-interval",
    "/jc:configuration/protocols/ldp/interface/hold-time",
    "/jc:configuration/protocols/ldp/interface/name",
    "/jc:configuration/protocols/ldp/interface/transport-address",
    "/jc:configuration/protocols/ldp/preference",
    "/jc:configuration/protocols/ldp/transport-address",
    "/jc:configuration/protocols/mpls/interface/admin-group",
    "/jc:configuration/protocols/mpls/interface/admin-group-extended",
    "/jc:configuration/protocols/mpls/interface/always-mark-connection-protection-tlv",
    "/jc:configuration/protocols/mpls/interface/disable",
    "/jc:configuration/protocols/mpls/interface/name",
    "/jc:configuration/protocols/mpls/interface/srlg",
    "/jc:configuration/protocols/mpls/interface/static/protection-revert-time",
    "/jc:configuration/protocols/mpls/interface/switch-away-lsps",
    "/jc:configuration/protocols/mpls/ipv6-tunneling",
    "/jc:configuration/protocols/mpls/no-propagate-ttl",
    "/jc:configuration/rcsid",
    "/jc:configuration/routing-instances/instance/apply-groups",
    "/jc:configuration/routing-instances/instance/apply-groups-except",
    "/jc:configuration/routing-instances/instance/export-default-action",
    "/jc:configuration/routing-instances/instance/import-default-action",
    "/jc:configuration/routing-instances/instance/instance-type",
    "/jc:configuration/routing-instances/instance/interface/any",
    "/jc:configuration/routing-instances/instance/interface/multicast",
    "/jc:configuration/routing-instances/instance/interface/name",
    "/jc:configuration/routing-instances/instance/interface/primary",
    "/jc:configuration/routing-instances/instance/interface/unicast",
    "/jc:configuration/routing-instances/instance/name",
    "/jc:configuration/routing-instances/instance/no-vrf-advertise",
    "/jc:configuration/routing-instances/instance/protocols/bgp/group/export",
    "/jc:configuration/routing-instances/instance/protocols/bgp/group/import",
    "/jc:configuration/routing-instances/instance/protocols/bgp/group/name",
    "/jc:configuration/routing-instances/instance/protocols/bgp/group/neighbor/as-override",
    "/jc:configuration/routing-instances/instance/protocols/bgp/group/neighbor/authentication-algorithm",
    "/jc:configuration/routing-instances/instance/protocols/bgp/group/neighbor/authentication-key",
    "/jc:configuration/routing-instances/instance/protocols/bgp/group/neighbor/description",
    "/jc:configuration/routing-instances/instance/protocols/bgp/group/neighbor/multihop",
    "/jc:configuration/routing-instances/instance/protocols/bgp/group/neighbor/multihop/no-nexthop-change",
    "/jc:configuration/routing-instances/instance/protocols/bgp/group/neighbor/multihop/ttl",
    "/jc:configuration/routing-instances/instance/protocols/bgp/group/neighbor/name",
    "/jc:configuration/routing-instances/instance/protocols/bgp/group/neighbor/peer-as",
    "/jc:configuration/routing-instances/instance/protocols/bgp/group/passive",
    "/jc:configuration/routing-instances/instance/protocols/evpn",
    "/jc:configuration/routing-instances/instance/protocols/evpn/control-word",
    "/jc:configuration/routing-instances/instance/route-distinguisher",
    "/jc:configuration/routing-instances/instance/vrf-table-label",
    "/jc:configuration/routing-instances/instance/vrf-target/auto",
    "/jc:configuration/routing-instances/instance/vrf-target/community",
    "/jc:configuration/routing-instances/instance/vrf-target/export",
    "/jc:configuration/routing-instances/instance/vrf-target/import",
    "/jc:configuration/routing-options/autonomous-system/as-number",
    "/jc:configuration/system/host-name",
    "/jc:configuration/system/services",
    "/jc:configuration/system/services/netconf/rfc-compliant",
    "/jc:configuration/system/services/netconf/yang-compliant",
    "/jc:configuration/version",
]
        filter_schema(dt.root, paths)
        return dt

    spec = orchestron.build.SysSpec("sorespo", [
        cfs_layer,
        inter_layer,
        rfs_layer,
    ], [
        orchestron.build.DeviceType.from_dir(fc, "CiscoIosXr_24_1_ncs55a1", "yang/CiscoIosXr_24_1_ncs55a1"),
        orchestron.build.DeviceType.from_dir(fc, "JuniperCRPD_23_4R1_9", "yang/JuniperCRPD_23_4R1_9"),
        orchestron.build.DeviceType.from_dir(fc, "NokiaSRLinux_25_3_2", "yang/NokiaSRLinux_25_3_2"),
    ])
    compiled_spec = spec.compile()
    transform_list_order(transform_filter(compiled_spec.dev_types["JuniperCRPD_23_4R1_9"]))
    compiled_spec.gen_app(fc, "../src/")

    env.exit(0)
